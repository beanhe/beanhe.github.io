---
layout: post
title: ssh配置相关
category: ssh
tags: [ssh,杂记]
---
> ssh连接超时问题解决方案：

1. 修改server端的etc/ssh/sshd_config
	- ClientAliveInterval 60 ＃server每隔60秒发送一次请求给client，然后client响应，从而保持连接
	- ClientAliveCountMax 3 ＃server发出请求后，客户端没有响应得次数达到3，就自动断开连接，正常情况下，client不会不响应

2. 修改client端的etc/ssh/ssh_config添加以下：（在没有权限改server配置的情形下）
	- ServerAliveInterval 60 ＃client每隔60秒发送一次请求给server，然后server响应，从而保持连接
	-ServerAliveCountMax 3  ＃client发出请求后，服务器端没有响应得次数达到3，就自动断开连接，正常情况下，server不会不响应

3. 另一种方式：不修改配置文件在命令参数里ssh -o ServerAliveInterval=60 这样子只会在需要的连接中保持持久连接， 毕竟不是所有连接都要保持持久的

> 去掉首次登陆提醒：首次使用密钥登录远程服务器的时候，SSH会提醒

```
The authenticity of host 'XXX.XXX.XXX' can't be established.
RSA key fingerprint is 09:6c:ef:cd:55:c4:4f:ss:5a:88:46:0a:a9:27:83:89.
```
这仅仅是一个提醒，并不会做任何影响登录的操作，当选择yes的时候，对应注意的SSH登录信息会被记录到~/.ssh/known_hosts文件中，选no择不记录。若要去掉次消息可使用StrictHostKeyChecking选项来控制，可使用以下几种方法： 

- 只是针对某些服务器，则可在命令中添加次选项：

```
ssh -o StrictHostKeyChecking=no
```

- 若要针对很多服务器或者所有服务器进行设置，则可通过修改SSH配置文件/etc/ssh_config或~/.ssh/ssh_config来取消这个提示信息，只需要在配置文件中添加如下行即可：

```
 Host *
   StrictHostKeyChecking no
或针对某些服务器
 Host 192.168.1.*
   StrictHostKeyChecking no
```



---
layout: post
title: inotify相关配置
category: 监控 
tags: [inotify]
---
> inotifywait命令
- inotifywai命令中监控事件的含义（events）
	- access:	文件或目录内容被读取
	- modify: 文件或目录内容被修改
	- attrib: 文件或目录属性被修改
	- close_write: 文件或目录在被写模式打开后关闭
	- close_nowrite: 文件或目录在被读模式打开后关闭
	- close: 文件或目录被关闭（忽略读写模式）
	- open: 文件或目录被打开
	- moved_to: 文件或目录被移动到监控目录中
	- moved_from: 文件或目录被移出监控目录
	- move: 监控目录下的文件或目录被移动
	- create: 监控目录中有新文件或目录被创建
	- delete: 监控目录中的文件或目录被删除
	- delete_self: 文件或目录被删除
	- unmount: 包含文件或目录的文件系统被umount
- inotifywait与rsync写作时的小结
	- 由于inotifywait监控的很细致，所以如果被监控目录中经常发生变化，则要注意结合上述监控事件进行监控，否则一点小的操作就会导致多次rsync同步操作
	- 当有些文件或目录不需要同步的时候，最好使用inotifywait的`--exclude`参数结合正则表达式将其排除，虽然rsync可以做排除操作，但是一般两者结合的时候，rsync是通过inotifywait的实时监控输出来决定是否同步的，所以如果没有在inotifywait做排除操作，则当这些不需要同步的内容被修改时候仍然会触发监控事件，而每一个监控事件都会导致一次rsync同步，此时对于rsync来说，就算做了排除也仍然要进行数据对比，导致不必要的开销

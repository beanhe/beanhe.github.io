---
layout: post
title: Shell关联数组
category: shell,linux
tags: [__beanhe,shell,linux]
---

### Shell关联数组

##### 在`SHELL`中，没有原生的类似`Python`、`Perl`等语言中的字典数据结构，但是在`bash`(Bourne Shell)`4.0`以上的版本提供了类似的哈希表结构：关联数组。
##### 在定义关联数组之前需要使用`declare`命令进行显式的声明，如要定义一个名为`arr`的关联数组，则需要在定义前做如下声明：

```SHELL
declare -A arr
```

##### 声明之后就可以对数组进行定义，例如定义一组用户年龄的关联数组：

```SHELL
arr=([user1]=20 [user2]=21 [user3]=32)
```

##### 可以发现定义和赋值都很简单，如果需要对关联数组的各组成元素进行调用，可参考下表：

| 功能  | 调用方法  |
| :------------: | :------------: |
|  获取指定元素的值 | `${arr[user2]}`  |
|  获取所有的键 | `${!arr[@]}` 或者 `${!arr[*]}` |
|  获取所有的值 | `${arr[@]}` 或者 `${arr[*]}`   |
|  获取数组长度 | `${#arr[@]}` 或者 `${#arr[*]}` |

##### 示例：

```SHELL
$ cat test.sh
#!/usr/local/bin/bash
declare -A arr
arr=([user1]=20 [user2]=21 [user3]=32)

echo "数组长度：\${#arr[@]}: ${#arr[@]}；\${#arr[*]}：${#arr[*]}"
echo "数组键列表：\${!arr[@]}: ${!arr[@]}；\${!arr[*]}：${!arr[*]}"
echo "数组值列表：\${arr[@]}: ${arr[@]}；\${arr[*]}：${arr[*]}"
echo "user2的年龄：\${arr[user2]}：${arr[user2]}"
$ ./test.sh
数组长度：${#arr[@]}: 3；${#arr[*]}：3
数组键列表：${!arr[@]}: user3 user2 user1；${!arr[*]}：user3 user2 user1
数组值列表：${arr[@]}: 32 21 20；${arr[*]}：32 21 20
user2的年龄：${arr[user2]}：21
```
---
layout: post
title: innodb笔记
category: mysql
tags: [mysql,innodb,mysql配置]
---

> 启用innodb引擎

- 关于mysql支持的存储引擎可以参考[此链接](http://down.chinaz.com/server/201207/2090_1.htm)，简介可以通过在mysql中执行`show engines`命令进行查看
- mysql默认采用MyISAM引擎，要启用innodb需修改配置文件后`重启生效`，启用方法为：

	- 若配置文件`my.cnf`中有`skip-innodb`行则需注释掉
	- 若没有`skip-innodb`行则直接在`[mysqld]`配置块加入`default-storage-engine = INNODB`即可

- innodb表空间：默认情况下所有表使用共享表空间，即数据库的所有表数据（不包括表结构）都存放在同一个表空间文件中，默认文件名为`ibdata1`，初始化10M，文件存放路径由主配置文件中的`innodb_data_home_dir`决定，表结构文件则存储在`innodb_data_home_dir`目录下对应的数据库存储目录中，文件名格式为`TABLE_NAME.frm`。
- Innodb还支持独占表空间的，此时需要在主配置文件中添加`innodb_file_per_table = 1`行启用，重启生效后，innodd存储引擎会为新建的表产生两种数据存储文件`.frm`和`.ibd`，其中`.frm`文件存放表结构，`.ibd`为表空间文件，用来存放表数据和索引，若要使启用之前的表也能够有独占表空间，则可以使用命令`alter table TABLE_NAME engine=innodb`来实现
	
	```
	# 判断是否启用独占表空间：
	> show variables like 'innodb_file_per%';

	# 启用innodb
	default-storage-engine = INNODB
	# skip-innodb 

	# 启用独占表空间,1代表启用独占表空间，0表示使用共享表空间
	innodb_file_per_table = 1 

	# 使指定表启用独占表空间
	> alter table TABLE_NAME engine=innodb
	```

---
layout: post
title: nginx+php
category: web,php
tags: [nginx,php]
---
> nginx配置文件样例：

```
server {
        listen          80;
        server_name     192.168.0.188;
        location / {
                root    /usr/share/nginx/html;
                index   index.php index.html index.htm;
        }
        location ~ \.php$ {
                root    /usr/share/nginx/html;
                fastcgi_pass    127.0.0.1:9000;
                fastcgi_param   SCRIPT_FILENAME /usr/share/nginx/html$fastcgi_script_name;
                include         fastcgi_params;
        }
}
```
- 上面的配置中:
	- location 定义文件类型, \.php$ 代表所有以 php 作为文件后缀的文件类型.
	- root 定义 php 文件存放的路径, 当前以 "/www" 作为默认存放位置.
	- fastcgi_index 定义 php 文件类型中的默认索引页
	- fastcgi_param SCRIPT_FILENAME 定义了页面请求参数, 如客户端需要访问 /t1.php 则会自动读取 /www/t1.php文件, 如客户端访问 / 则自动读取 /www/index.php 文件
	- include 定义fastcgi 配置信息将会被保存到 /usr/local/nginx/conf/fastcgi_params 文件中

- nginx最常用的方法是利用 tcp/ip 协议连接 phpfastcgi 接口, 因此要连接php必须先启动fastcgi程序，启动方法为：

```
php-cgi -b 127.0.0.1:9000 -c /etc/php5/cgi/php.ini &
```
- `-b` 用于指定监听地址与端口,如果想指定配置文件位置，可以使用-c选项. 注意, nginx 服务器负责所有的客户端请求, 包括了静态网页解析 (html), 页面中的其他对象如 ccs文件jpg png文件等传输, 但遇到客户需要请求 php 页面请求或 php 源码解析时, nginx将会把页面传递到fastcgi接口, 由 php-cgi 程序进行解析.

- 启动fastcgi后重启nginx就可以通过`http://IP/index.php`浏览php网页内容了

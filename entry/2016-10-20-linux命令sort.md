---
layout: post
title: linux命令sort
category: linux
tags: [linux,sort]
---
- linux用于排序的方法有很多，其中以sort命令最常用，通常我们都是简单实用sort进行单列排序，比如源文件如下：

```
› cat data.txt
 10.17.51.38
 10.17.31.48
 10.17.51.140
 10.17.21.117
 10.17.21.103
 10.17.41.216
 10.17.31.92
 10.17.41.114
 10.17.41.93
 10.17.41.111
 10.17.51.28
 10.17.41.92
 10.17.31.36
 10.17.21.96
 10.17.21.191
 10.17.31.162
```

- 若以`.`为分隔符，按第三段排序，则使用命令：

```
› sort -t. -k3n data.txt
 10.17.21.103
 10.17.21.117
 10.17.21.191
 10.17.21.96
 10.17.31.162
 10.17.31.36
 10.17.31.48
 10.17.31.92
 10.17.41.111
 10.17.41.114
 10.17.41.216
 10.17.41.92
 10.17.41.93
 10.17.51.140
 10.17.51.28
 10.17.51.38
```

- 发现结果并不如意，因为第四段是乱序的，有的小伙伴可能会说再加个管道符再进行一次排序，即：

```
› sort -t. -k3n data.txt |sort -t. -k4n
 10.17.51.28
 10.17.31.36
 10.17.51.38
 10.17.31.48
 10.17.31.92
 10.17.41.92
 10.17.41.93
 10.17.21.96
 10.17.21.103
 10.17.41.111
 10.17.41.114
 10.17.21.117
 10.17.51.140
 10.17.31.162
 10.17.21.191
 10.17.41.216
```

- 结果显然不是想要的，其实`sort`命令本身就支持一次性进行多列排序的，此例中方法为：

```
› sort -t. -k3n,3 -k4n,4 data.txt
 10.17.21.96
 10.17.21.103
 10.17.21.117
 10.17.21.191
 10.17.31.36
 10.17.31.48
 10.17.31.92
 10.17.31.162
 10.17.41.92
 10.17.41.93
 10.17.41.111
 10.17.41.114
 10.17.41.216
 10.17.51.28
 10.17.51.38
 10.17.51.140
```

- *注*: 实例中`-t`用以指定分隔符，`-n`代表按数字大小排序
